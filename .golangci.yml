run:
  deadline: 10m

linters-settings:
  gocyclo:
    min-complexity: 30
  lll:
    line-length: 180
  gci:
    sections:
      - standard
      - default
      - prefix(github.com/opendatahub-io/opendatahub-operator)
      - blank
      - dot
    skip-generated: false
    custom-order: true
  errcheck:
    check-type-assertions: true
  exhaustive:
    check:
      - switch
    default-signifies-exhaustive: true
  funlen:
    lines: 100
    statements: 100
    ignore-comments: true
  nolintlint:
    allow-no-explanation: [ funlen, lll ]
    require-specific: true
  importas:
    alias:
      - pkg: github.com/opendatahub-io/opendatahub-operator/v2/apis/dscinitialization/v1
        alias: dsciv1
      - pkg: github.com/opendatahub-io/opendatahub-operator/v2/apis/datasciencecluster/v1
        alias: dscv1
      - pkg: github.com/opendatahub-io/opendatahub-operator/v2/apis/infrastructure/v1
        alias: infrav1
      - pkg: k8s.io/apimachinery/pkg/api/errors
        alias: k8serr
      # Ensures that i.e. k8s.io/api/rbac/v1 is aliased as rbacv1
      - pkg: k8s.io/api/(\w+)/(v[\w\d]+)
        alias: $1$2
      - pkg: github.com/openshift/api/(\w+)/(v[\w\d]+)
        alias: $1$2
  revive:
    rules:
      - name: dot-imports
        arguments:
          - allowedPackages: ["github.com/onsi/ginkgo/v2","github.com/onsi/gomega","github.com/onsi/gomega/gstruct"]
  perfsprint:
    sprintf1: false
    strconcat: false

linters:
  enable-all: true
  disable:
    - depguard # [replaced by gomodguard] checks if package imports are in a list of acceptable packages
    - exhaustruct # Prevents empty struct. We use a lot of these so I think it is safe to disable.c
    - forbidigo
    - gochecknoglobals # Prevents use of global vars.
    - gofumpt
    - gomnd # Doesnot allow hardcoded numbers
    - gomoddirectives # Doesnot allow replace in go mod file
    - mnd
    - nestif
    - nilnil
    - paralleltest # [too many false positives] detects missing usage of t.Parallel() method in your Go test
    - tagliatelle
    - varnamelen # doesnot allow shorter names like c,k etc. But golang prefers short named vars.
    - wsl # [too strict and mostly code is not more readable] whitespace linter forces you to use empty lines
    - wrapcheck # check if this is required. Prevents direct return of err.

    # Need to check
    - nlreturn # [too strict and mostly code is not more readable] checks for a new line before return and branch statements to increase code clarity
    - err113 # [too strict] checks the errors handling expressions
    
    # To be fixed
    - gocognit # https://github.com/opendatahub-io/opendatahub-operator/issues/709
    - cyclop   # https://github.com/opendatahub-io/opendatahub-operator/issues/709
    - funlen   # https://github.com/opendatahub-io/opendatahub-operator/issues/709
    - godox    # https://github.com/opendatahub-io/opendatahub-operator/issues/699

issues:
  exclude-dirs:
    - apis
  exclude-rules:
    - path: tests/*/(.+)_test\.go
      linters:
        - typecheck
        - dupl