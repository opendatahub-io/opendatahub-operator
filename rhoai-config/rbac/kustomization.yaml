apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
- ../../odh-config/rbac
- auth_proxy_service.yaml
- auth_proxy_client_clusterrole.yaml
- role_binding.yaml
- role.yaml
patches:
  - patch: |-
      $patch: delete
      apiVersion: rbac.authorization.k8s.io/v1
      kind: ClusterRoleBinding
      metadata:
        name: controller-manager-rolebinding
  - patch: |-
      $patch: delete
      apiVersion: v1
      kind: Service
      metadata:
        name: controller-manager-metrics-service
        namespace: system
  - patch: |-
      $patch: delete
      apiVersion: v1
      kind: ServiceAccount
      metadata:
          name: controller-manager
          namespace: system
  - patch: |-
      $patch: delete
      apiVersion: rbac.authorization.k8s.io/v1
      kind: ClusterRole
      metadata:
          name: metrics-reader
  - patch: |-
      $patch: delete
      apiVersion: rbac.authorization.k8s.io/v1
      kind: ClusterRole
      metadata:
        name: controller-manager-role
