---
apiVersion: v1
kind: Service
metadata:
  name: data-science-monitoringstack-prometheus
  namespace: {{.Namespace}}
  labels:
    app: prometheus-restricted
    platform.opendatahub.io/part-of: monitoring
    app.kubernetes.io/name: prometheus
    app.kubernetes.io/instance: data-science-monitoringstack
  ownerReferences:
    - apiVersion: {{.Component.APIVersion}}
      kind: {{.Component.Kind}}
      name: {{.Component.Name}}
      uid: {{.Component.UID}}
  annotations:
    monitoring.opendatahub.io/secure-proxy: "true"
    monitoring.opendatahub.io/secure-proxy-version: "v2"
    monitoring.opendatahub.io/tls-enforced: "true"
    service.beta.openshift.io/serving-cert-secret-name: data-science-monitoringstack-prometheus-tls
spec:
  type: ClusterIP
  ports:
    - name: web
      port: 9090
      protocol: TCP
      targetPort: https # Points to the secure proxy port 8443
  selector:
    app: prometheus-restricted
