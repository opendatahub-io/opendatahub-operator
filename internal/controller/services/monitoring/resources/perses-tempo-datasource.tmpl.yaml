apiVersion: perses.dev/v1alpha1
kind: PersesDatasource
metadata:
  name: tempo-datasource
  namespace: {{.Namespace}}
spec:
{{- if .TempoTLSEnabled }}
  client:
    tls:
      enable: true
      caCert:
        type: configmap
        name: tempo-service-ca
        certPath: service-ca.crt
{{- end }}
  config:
    default: false
    display:
      name: "RHOAI Tempo Datasource"
      description: "Tempo datasource for distributed tracing in RHOAI"
    plugin:
      kind: "TempoDatasource"
      spec:
        proxy:
          kind: HTTPProxy
          spec:
            url: {{.TempoQueryEndpoint}}
            headers:
              X-Scope-OrgID: {{.Namespace}}
